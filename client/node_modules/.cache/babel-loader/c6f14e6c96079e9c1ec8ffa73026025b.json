{"ast":null,"code":"import _classCallCheck from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{showLoading}from\"../helper/loading\";import M from\"materialize-css\";import{toast}from\"react-toastify\";import{isAuthenticated}from\"../helper/auth\";import Comment from\"./sections/comment\";import RecipeInfo from\"./sections/recipeInfo\";var imageProf=require(\"../../public/uploads/chef2.jpg\");var Recipe=/*#__PURE__*/function(_Component){_inherits(Recipe,_Component);var _super=_createSuper(Recipe);function Recipe(){var _this;_classCallCheck(this,Recipe);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={recipe:[],loading:false,profileImage:true,newComment:\"\",newReplyComment:\"\",comments:[],repliedComments:[],commentAdded:[],openReply:false,replyId:\"\",parentCommentId:\"\"};_this.componentDidMount=function(){_this.setState({loading:true});var url=window.location.pathname.toString();if(isAuthenticated()){var _JSON$parse=JSON.parse(localStorage.user),_id=_JSON$parse._id;_this.setState({user:_id});}axios.get(\"/api\"+url).then(function(_ref){var data=_ref.data;if(data.user.image===\"\"){data.user.image=imageProf;}_this.setState({recipe:data,loading:false});var parallax=document.querySelectorAll(\".parallax\");M.Parallax.init(parallax);}).catch(function(err){toast.error(\"Invalid recipe\");_this.setState({loading:false});});};_this.renderRecipe=function(recipe,user){};_this.deleteComment=function(e){var comments=_this.state.comments.filter(function(m){return m._id!==e.currentTarget.id;});_this.setState({comments:comments});var id=e.currentTarget.id;var obj={_id:id,user:_this.state.user};axios.delete(\"/api/comment/\".concat(id),{data:obj}).then(function(){toast.success(\"You successfully deleted comment\",{position:\"bottom-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}).catch(function(err){toast.error(\"\".concat(err.response.data),{position:\"bottom-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});};return _this;}_createClass(Recipe,[{key:\"render\",value:function render(){var _this$state=this.state,recipe=_this$state.recipe,loading=_this$state.loading,comments=_this$state.comments,user=_this$state.user,newComment=_this$state.newComment,openReply=_this$state.openReply,replyId=_this$state.replyId,newReplyComment=_this$state.newReplyComment,repliedComments=_this$state.repliedComments;if(recipe.length!==0){return/*#__PURE__*/React.createElement(React.Fragment,null,loading?showLoading():null,/*#__PURE__*/React.createElement(RecipeInfo,{recipe:recipe,user:recipe.user}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Comment,{comments:comments,newComment:newComment,user:user,imageProf:imageProf,onSubmit:this.handleComment,onChange:this.handleChange,onDelete:this.deleteComment,showReplyInput:this.showReplyInput,openReply:openReply,replyId:replyId,newReplyComment:newReplyComment,repliedComments:repliedComments})));}else{return null;}}}]);return Recipe;}(Component);export default Recipe;","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/recipePage/recipe.jsx"],"names":["React","Component","axios","showLoading","M","toast","isAuthenticated","Comment","RecipeInfo","imageProf","require","Recipe","state","recipe","loading","profileImage","newComment","newReplyComment","comments","repliedComments","commentAdded","openReply","replyId","parentCommentId","componentDidMount","setState","url","window","location","pathname","toString","JSON","parse","localStorage","user","_id","get","then","data","image","parallax","document","querySelectorAll","Parallax","init","catch","err","error","renderRecipe","deleteComment","e","filter","m","currentTarget","id","obj","delete","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","response","length","handleComment","handleChange","showReplyInput"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { showLoading } from \"../helper/loading\";\nimport M from \"materialize-css\";\nimport { toast } from \"react-toastify\";\nimport { isAuthenticated } from \"../helper/auth\";\nimport Comment from \"./sections/comment\";\nimport RecipeInfo from \"./sections/recipeInfo\";\nconst imageProf = require(\"../../public/uploads/chef2.jpg\");\nclass Recipe extends Component {\n  state = {\n    recipe: [],\n    loading: false,\n    profileImage: true,\n    newComment: \"\",\n    newReplyComment: \"\",\n    comments: [],\n    repliedComments: [],\n    commentAdded: [],\n    openReply: false,\n    replyId: \"\",\n    parentCommentId: \"\",\n  };\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    const url = window.location.pathname.toString();\n\n    if (isAuthenticated()) {\n      const { _id } = JSON.parse(localStorage.user);\n      this.setState({ user: _id });\n    }\n\n    axios\n      .get(\"/api\" + url)\n      .then(({ data }) => {\n        if (data.user.image === \"\") {\n          data.user.image = imageProf;\n        }\n        this.setState({ recipe: data, loading: false });\n        let parallax = document.querySelectorAll(\".parallax\");\n        M.Parallax.init(parallax);\n      })\n      .catch((err) => {\n        toast.error(\"Invalid recipe\");\n        this.setState({ loading: false });\n      });\n  };\n\n  renderRecipe = (recipe, user) => {};\n  deleteComment = (e) => {\n    const comments = this.state.comments.filter(\n      (m) => m._id !== e.currentTarget.id\n    );\n    this.setState({ comments });\n    const id = e.currentTarget.id;\n    const obj = {\n      _id: id,\n      user: this.state.user,\n    };\n    axios\n      .delete(`/api/comment/${id}`, { data: obj })\n      .then(() => {\n        toast.success(`You successfully deleted comment`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      })\n      .catch((err) => {\n        toast.error(`${err.response.data}`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      });\n  };\n  render() {\n    const {\n      recipe,\n      loading,\n      comments,\n      user,\n      newComment,\n      openReply,\n      replyId,\n      newReplyComment,\n      repliedComments,\n    } = this.state;\n    if (recipe.length !== 0) {\n      return (\n        <React.Fragment>\n          {loading ? showLoading() : null}\n          <RecipeInfo recipe={recipe} user={recipe.user} />\n          <div className=\"container\">\n            <Comment\n              comments={comments}\n              newComment={newComment}\n              user={user}\n              imageProf={imageProf}\n              onSubmit={this.handleComment}\n              onChange={this.handleChange}\n              onDelete={this.deleteComment}\n              showReplyInput={this.showReplyInput}\n              openReply={openReply}\n              replyId={replyId}\n              newReplyComment={newReplyComment}\n              repliedComments={repliedComments}\n            />\n          </div>\n        </React.Fragment>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default Recipe;\n"]},"metadata":{},"sourceType":"module"}