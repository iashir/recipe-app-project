{"ast":null,"code":"var _jsxFileName = \"/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/recipePage/recipe.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { showLoading } from \"../helper/loading\";\nimport M from \"materialize-css\";\nimport { toast } from \"react-toastify\";\nimport { isAuthenticated } from \"../helper/auth\";\nimport Comment from \"./sections/comment\";\nimport RecipeInfo from \"./sections/recipeInfo\";\n\nconst imageProf = require(\"../../public/uploads/chef2.jpg\");\n\nclass Recipe extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      recipe: [],\n      loading: false,\n      profileImage: true,\n      newComment: \"\",\n      newReplyComment: \"\",\n      comments: [],\n      repliedComments: [],\n      commentAdded: [],\n      openReply: false,\n      replyId: \"\",\n      parentCommentId: \"\"\n    };\n\n    this.componentDidMount = () => {\n      this.setState({\n        loading: true\n      });\n      const url = window.location.pathname.toString();\n\n      if (isAuthenticated()) {\n        const {\n          _id\n        } = JSON.parse(localStorage.user);\n        this.setState({\n          user: _id\n        });\n      }\n\n      axios.get(\"/api\" + url).then(({\n        data\n      }) => {\n        if (data.user.image === \"\") {\n          data.user.image = imageProf;\n        }\n\n        this.setState({\n          recipe: data,\n          loading: false\n        });\n        let parallax = document.querySelectorAll(\".parallax\");\n        M.Parallax.init(parallax);\n      }).catch(err => {\n        toast.error(\"Invalid recipe\");\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.renderRecipe = (recipe, user) => {};\n\n    this.deleteComment = e => {\n      const comments = this.state.comments.filter(m => m._id !== e.currentTarget.id);\n      this.setState({\n        comments\n      });\n      const id = e.currentTarget.id;\n      const obj = {\n        _id: id,\n        user: this.state.user\n      };\n      axios.delete(`/api/comment/${id}`, {\n        data: obj\n      }).then(() => {\n        toast.success(`You successfully deleted comment`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }).catch(err => {\n        toast.error(`${err.response.data}`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      recipe,\n      loading,\n      comments,\n      user,\n      newComment,\n      openReply,\n      replyId,\n      newReplyComment,\n      repliedComments\n    } = this.state;\n\n    if (recipe.length !== 0) {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }\n      }, loading ? showLoading() : null, /*#__PURE__*/React.createElement(RecipeInfo, {\n        recipe: recipe,\n        user: recipe.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Comment, {\n        comments: comments,\n        newComment: newComment,\n        user: user,\n        imageProf: imageProf,\n        onSubmit: this.handleComment,\n        onChange: this.handleChange,\n        onDelete: this.deleteComment,\n        showReplyInput: this.showReplyInput,\n        openReply: openReply,\n        replyId: replyId,\n        newReplyComment: newReplyComment,\n        repliedComments: repliedComments,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      })));\n    } else {\n      return null;\n    }\n  }\n\n}\n\nexport default Recipe;","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/recipePage/recipe.jsx"],"names":["React","Component","axios","showLoading","M","toast","isAuthenticated","Comment","RecipeInfo","imageProf","require","Recipe","state","recipe","loading","profileImage","newComment","newReplyComment","comments","repliedComments","commentAdded","openReply","replyId","parentCommentId","componentDidMount","setState","url","window","location","pathname","toString","_id","JSON","parse","localStorage","user","get","then","data","image","parallax","document","querySelectorAll","Parallax","init","catch","err","error","renderRecipe","deleteComment","e","filter","m","currentTarget","id","obj","delete","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","response","render","length","handleComment","handleChange","showReplyInput"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { showLoading } from \"../helper/loading\";\nimport M from \"materialize-css\";\nimport { toast } from \"react-toastify\";\nimport { isAuthenticated } from \"../helper/auth\";\nimport Comment from \"./sections/comment\";\nimport RecipeInfo from \"./sections/recipeInfo\";\nconst imageProf = require(\"../../public/uploads/chef2.jpg\");\nclass Recipe extends Component {\n  state = {\n    recipe: [],\n    loading: false,\n    profileImage: true,\n    newComment: \"\",\n    newReplyComment: \"\",\n    comments: [],\n    repliedComments: [],\n    commentAdded: [],\n    openReply: false,\n    replyId: \"\",\n    parentCommentId: \"\",\n  };\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    const url = window.location.pathname.toString();\n\n    if (isAuthenticated()) {\n      const { _id } = JSON.parse(localStorage.user);\n      this.setState({ user: _id });\n    }\n\n    axios\n      .get(\"/api\" + url)\n      .then(({ data }) => {\n        if (data.user.image === \"\") {\n          data.user.image = imageProf;\n        }\n        this.setState({ recipe: data, loading: false });\n        let parallax = document.querySelectorAll(\".parallax\");\n        M.Parallax.init(parallax);\n      })\n      .catch((err) => {\n        toast.error(\"Invalid recipe\");\n\n        this.setState({ loading: false });\n      });\n  };\n\n  renderRecipe = (recipe, user) => {};\n  deleteComment = (e) => {\n    const comments = this.state.comments.filter(\n      (m) => m._id !== e.currentTarget.id\n    );\n    this.setState({ comments });\n    const id = e.currentTarget.id;\n    const obj = {\n      _id: id,\n      user: this.state.user,\n    };\n    axios\n      .delete(`/api/comment/${id}`, { data: obj })\n      .then(() => {\n        toast.success(`You successfully deleted comment`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      })\n      .catch((err) => {\n        toast.error(`${err.response.data}`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      });\n  };\n  render() {\n    const {\n      recipe,\n      loading,\n      comments,\n      user,\n      newComment,\n      openReply,\n      replyId,\n      newReplyComment,\n      repliedComments,\n    } = this.state;\n    if (recipe.length !== 0) {\n      return (\n        <React.Fragment>\n          {loading ? showLoading() : null}\n          <RecipeInfo recipe={recipe} user={recipe.user} />\n          <div className=\"container\">\n            <Comment\n              comments={comments}\n              newComment={newComment}\n              user={user}\n              imageProf={imageProf}\n              onSubmit={this.handleComment}\n              onChange={this.handleChange}\n              onDelete={this.deleteComment}\n              showReplyInput={this.showReplyInput}\n              openReply={openReply}\n              replyId={replyId}\n              newReplyComment={newReplyComment}\n              repliedComments={repliedComments}\n            />\n          </div>\n        </React.Fragment>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default Recipe;\n"]},"metadata":{},"sourceType":"module"}