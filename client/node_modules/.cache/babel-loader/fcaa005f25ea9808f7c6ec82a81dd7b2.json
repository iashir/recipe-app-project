{"ast":null,"code":"var _jsxFileName = \"/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/recipes/recipes.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { showLoading } from \"../helper/loading\";\nimport AOS from \"aos\";\nimport \"aos/dist/aos.css\";\nimport { paginate } from \"../helper/paginate\";\nimport Pagination from \"../common/pagination\";\nimport M from \"materialize-css\";\nimport { isAuthenticated } from \"../helper/auth\";\nimport SelectInput from \"./sections/selectInput\";\nimport RecipeCard from \"../common/recipeCard\";\nimport SearchInput from \"../common/searchInput\";\n\nconst imageProf = require(\"../../public/uploads/chef2.jpg\");\n\nclass Recipes extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      recipes: [],\n      loading: false,\n      categories: [],\n      currentPage: 1,\n      pageSize: 6,\n      searchQuery: \"\",\n      selectedCategory: \"\"\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.id]: event.target.value,\n        selectedCategory: \"\",\n        currentPage: 1\n      });\n    };\n\n    this.handleSearchClose = () => {\n      this.setState({\n        searchQuery: \"\"\n      });\n    };\n\n    this.componentDidMount = () => {\n      AOS.init();\n      var elems = document.querySelectorAll(\".materialboxed\");\n      M.Materialbox.init(elems);\n      this.setState({\n        loading: true\n      });\n\n      if (isAuthenticated()) {\n        let {\n          _id\n        } = JSON.parse(localStorage.user);\n        this.setState({\n          userId: _id\n        });\n      }\n\n      if (window.location.pathname === \"//subscriptions\") {\n        let {\n          _id\n        } = JSON.parse(localStorage.user);\n        axios.post(\"/api/recipes/getSubscriptionRecipes\", {\n          userFrom: _id\n        }).then(res => {\n          if (res.data.success) {\n            this.setState({\n              recipes: res.data.recipes,\n              loading: false\n            });\n          } else {\n            alert(\"fail\");\n          }\n        });\n      } else {\n        axios.get(\"/api/recipes\").then(({\n          data: recipes\n        }) => {\n          this.setState({\n            recipes,\n            loading: false\n          });\n        });\n      }\n\n      axios.get(\"/api/categories\").then(({\n        data: categories\n      }) => {\n        this.setState({\n          categories\n        });\n        M.AutoInit();\n      });\n    };\n\n    this.componentDidUpdate = prevProps => {\n      if (prevProps.location.pathname !== this.props.location.pathname) {\n        this.setState({\n          loading: true\n        });\n\n        if (window.location.pathname === \"/subscriptions\") {\n          let {\n            _id\n          } = JSON.parse(localStorage.user);\n          axios.post(\"/api/recipes/getSubscriptionRecipes\", {\n            userFrom: _id\n          }).then(res => {\n            if (res.data.success) {\n              this.setState({\n                recipes: res.data.recipes,\n                loading: false\n              });\n            } else {\n              alert(\"fail\");\n            }\n          });\n        } else {\n          axios.get(\"/api/recipes\").then(({\n            data: recipes\n          }) => {\n            this.setState({\n              recipes,\n              loading: false\n            });\n          });\n        }\n      }\n    };\n\n    this.handlePageChange = page => {\n      this.setState({\n        currentPage: page\n      });\n    };\n\n    this.handleCategorySelect = e => {\n      console.log(e.target.value);\n      this.setState({\n        selectedCategory: e.target.value,\n        searchQuery: \"\",\n        currentPage: 1\n      });\n    };\n\n    this.handleSearch = e => {\n      e.preventDefault();\n      this.setState({\n        selectedCategory: \"\",\n        currentPage: 1\n      });\n    };\n\n    this.handleSort = sortColumn => {\n      this.setState({\n        sortColumn\n      });\n    };\n\n    this.getPagedData = () => {\n      const {\n        pageSize,\n        currentPage,\n        selectedCategory,\n        searchQuery,\n        recipes: allRecipes\n      } = this.state;\n      let filtered = allRecipes;\n      if (searchQuery) filtered = allRecipes.filter(m => m.title.toLowerCase().startsWith(searchQuery.toLowerCase()));else if (selectedCategory && selectedCategory !== \"\") filtered = allRecipes.filter(recipe => recipe.category._id === selectedCategory);\n      const recipes = paginate(filtered, currentPage, pageSize);\n      return {\n        totalCount: filtered.length,\n        data: recipes\n      };\n    };\n  }\n\n  render() {\n    const {\n      pageSize,\n      currentPage,\n      loading,\n      searchQuery,\n      categories,\n      selectedCategory\n    } = this.state;\n    const {\n      totalCount,\n      data\n    } = this.getPagedData();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, loading ? showLoading() : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s12 m3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nav-wrapper white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SearchInput, {\n      onChange: this.handleChange,\n      onSearchClose: this.handleSearchClose,\n      searchQuery: searchQuery,\n      onSearch: this.handleSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(SelectInput, {\n      categories: categories,\n      selectedCategory: selectedCategory,\n      onCategorySelect: this.handleCategorySelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s12 m9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(RecipeCard, {\n      recipes: data,\n      imageProf: imageProf,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      itemsCount: totalCount,\n      pageSize: pageSize,\n      currentPage: currentPage,\n      onPageChange: this.handlePageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default Recipes;","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/recipes/recipes.jsx"],"names":["React","Component","axios","showLoading","AOS","paginate","Pagination","M","isAuthenticated","SelectInput","RecipeCard","SearchInput","imageProf","require","Recipes","state","recipes","loading","categories","currentPage","pageSize","searchQuery","selectedCategory","handleChange","event","setState","target","id","value","handleSearchClose","componentDidMount","init","elems","document","querySelectorAll","Materialbox","_id","JSON","parse","localStorage","user","userId","window","location","pathname","post","userFrom","then","res","data","success","alert","get","AutoInit","componentDidUpdate","prevProps","props","handlePageChange","page","handleCategorySelect","e","console","log","handleSearch","preventDefault","handleSort","sortColumn","getPagedData","allRecipes","filtered","filter","m","title","toLowerCase","startsWith","recipe","category","totalCount","length","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { showLoading } from \"../helper/loading\";\nimport AOS from \"aos\";\nimport \"aos/dist/aos.css\";\nimport { paginate } from \"../helper/paginate\";\nimport Pagination from \"../common/pagination\";\nimport M from \"materialize-css\";\nimport { isAuthenticated } from \"../helper/auth\";\nimport SelectInput from \"./sections/selectInput\";\nimport RecipeCard from \"../common/recipeCard\";\nimport SearchInput from \"../common/searchInput\";\n\nconst imageProf = require(\"../../public/uploads/chef2.jpg\");\n\nclass Recipes extends Component {\n  state = {\n    recipes: [],\n    loading: false,\n    categories: [],\n    currentPage: 1,\n    pageSize: 6,\n    searchQuery: \"\",\n    selectedCategory: \"\",\n  };\n\n  handleChange = (event) => {\n    this.setState({\n      [event.target.id]: event.target.value,\n      selectedCategory: \"\",\n      currentPage: 1,\n    });\n  };\n  handleSearchClose = () => {\n    this.setState({ searchQuery: \"\" });\n  };\n  componentDidMount = () => {\n    AOS.init();\n    var elems = document.querySelectorAll(\".materialboxed\");\n    M.Materialbox.init(elems);\n    this.setState({ loading: true });\n    if (isAuthenticated()) {\n      let { _id } = JSON.parse(localStorage.user);\n      this.setState({ userId: _id });\n    }\n    if (window.location.pathname === \"//subscriptions\") {\n      let { _id } = JSON.parse(localStorage.user);\n      axios\n        .post(\"/api/recipes/getSubscriptionRecipes\", {\n          userFrom: _id,\n        })\n        .then((res) => {\n          if (res.data.success) {\n            this.setState({ recipes: res.data.recipes, loading: false });\n          } else {\n            alert(\"fail\");\n          }\n        });\n    } else {\n      axios.get(\"/api/recipes\").then(({ data: recipes }) => {\n        this.setState({ recipes, loading: false });\n      });\n    }\n    axios.get(\"/api/categories\").then(({ data: categories }) => {\n      this.setState({ categories });\n      M.AutoInit();\n    });\n  };\n  componentDidUpdate = (prevProps) => {\n    if (prevProps.location.pathname !== this.props.location.pathname) {\n      this.setState({ loading: true });\n      if (window.location.pathname === \"/subscriptions\") {\n        let { _id } = JSON.parse(localStorage.user);\n        axios\n          .post(\"/api/recipes/getSubscriptionRecipes\", {\n            userFrom: _id,\n          })\n          .then((res) => {\n            if (res.data.success) {\n              this.setState({ recipes: res.data.recipes, loading: false });\n            } else {\n              alert(\"fail\");\n            }\n          });\n      } else {\n        axios.get(\"/api/recipes\").then(({ data: recipes }) => {\n          this.setState({ recipes, loading: false });\n        });\n      }\n    }\n  };\n  handlePageChange = (page) => {\n    this.setState({ currentPage: page });\n  };\n\n  handleCategorySelect = (e) => {\n    console.log(e.target.value);\n    this.setState({\n      selectedCategory: e.target.value,\n      searchQuery: \"\",\n      currentPage: 1,\n    });\n  };\n\n  handleSearch = (e) => {\n    e.preventDefault();\n    this.setState({\n      selectedCategory: \"\",\n      currentPage: 1,\n    });\n  };\n\n  handleSort = (sortColumn) => {\n    this.setState({ sortColumn });\n  };\n\n  getPagedData = () => {\n    const {\n      pageSize,\n      currentPage,\n      selectedCategory,\n      searchQuery,\n      recipes: allRecipes,\n    } = this.state;\n\n    let filtered = allRecipes;\n    if (searchQuery)\n      filtered = allRecipes.filter((m) =>\n        m.title.toLowerCase().startsWith(searchQuery.toLowerCase())\n      );\n    else if (selectedCategory && selectedCategory !== \"\")\n      filtered = allRecipes.filter(\n        (recipe) => recipe.category._id === selectedCategory\n      );\n\n    const recipes = paginate(filtered, currentPage, pageSize);\n\n    return { totalCount: filtered.length, data: recipes };\n  };\n\n  render() {\n    const {\n      pageSize,\n      currentPage,\n      loading,\n      searchQuery,\n      categories,\n      selectedCategory,\n    } = this.state;\n    const { totalCount, data } = this.getPagedData();\n\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          {loading ? showLoading() : null}\n          <div className=\"col s12 m3\">\n            <div className=\"nav-wrapper white\">\n              <SearchInput\n                onChange={this.handleChange}\n                onSearchClose={this.handleSearchClose}\n                searchQuery={searchQuery}\n                onSearch={this.handleSearch}\n              />\n              <SelectInput\n                categories={categories}\n                selectedCategory={selectedCategory}\n                onCategorySelect={this.handleCategorySelect}\n              />\n            </div>\n          </div>\n          <div className=\"col s12 m9\">\n            <RecipeCard recipes={data} imageProf={imageProf} />\n            <div className=\"row\">\n              <Pagination\n                itemsCount={totalCount}\n                pageSize={pageSize}\n                currentPage={currentPage}\n                onPageChange={this.handlePageChange}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Recipes;\n"]},"metadata":{},"sourceType":"module"}