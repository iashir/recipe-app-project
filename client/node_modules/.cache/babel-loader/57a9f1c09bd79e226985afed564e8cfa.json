{"ast":null,"code":"import _defineProperty from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import classnames from\"classnames\";import{setAuthentication,isAuthenticated}from\"./helper/auth\";import{showLoading}from\"./helper/loading\";import{login,googleLogin}from\"../api/auth\";import Validator from\"validator\";import GoogleLogin from\"react-google-login\";import{toast}from\"react-toastify\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:\"\",password:\"\",errors:{},loading:false,successMessage:\"\"};_this.componentDidMount=function(){if(isAuthenticated()&&isAuthenticated().role===1){_this.props.history.push(\"/admin\");}else if(isAuthenticated()&&isAuthenticated().role===0){_this.props.history.push(\"/recipes\");}if(_this.props.history.location.state){var _this$props$history$l=_this.props.history.location.state,username=_this$props$history$l.username,password=_this$props$history$l.password;_this.setState({username:username,password:password});}};_this.responseSuccessGoogle=function(response){var tokenId={tokenId:response.tokenId};_this.setState({loading:true});googleLogin(tokenId).then(function(res){var _res$data=res.data,token=_res$data.token,user=_res$data.user;console.log(res.data);setAuthentication(token,user);if(isAuthenticated()&&isAuthenticated().role===1){_this.props.history.push(\"/admin\");window.location.reload(false);}else{_this.props.history.push(\"/recipes\");window.location.reload(false);}var _JSON$parse=JSON.parse(localStorage.user),username=_JSON$parse.username;toast.success(\"Signed in as \".concat(username),{position:\"bottom-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});_this.setState({loading:false});}).catch(function(err){_this.setState({loading:false});});};_this.responseErrorGoogle=function(response){console.log(response);};_this.validate=function(s){if(/^(\\w+\\s?)*\\s*$/.test(s)){return s.replace(/\\s+$/,\"\");}console.log(\"TEST\");var trim=s.trim();return trim;};_this.handleChange=function(e){var badInput=e.target.value;var value=badInput.replace(/  +/g,\" \");_this.setState(_defineProperty({},e.target.id,value));_this.validateForm(e.target.id,value);};_this.handleSubmit=function(e){e.preventDefault();var userData={username:_this.state.username.trim(),password:_this.state.password.trim()};_this.setState({loading:true});login(userData).then(function(res){// Set User to localStorage and Token to Cookies\nvar _res$data2=res.data,token=_res$data2.token,user=_res$data2.user;setAuthentication(token,user);if(isAuthenticated()&&isAuthenticated().role===1){_this.props.history.push(\"/admin/recipes\");window.location.reload(false);}else{_this.props.history.push(\"/recipes\");window.location.reload(false);}_this.setState({loading:false,successMessage:res.data.successMessage});var _JSON$parse2=JSON.parse(localStorage.user),username=_JSON$parse2.username;toast.success(\"Signed in as \".concat(username),{position:\"bottom-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}).catch(function(err){_this.setState({errors:err.response.data,loading:false});toast.error(\"Username or Password is invalid\",{position:\"bottom-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});};return _this;}_createClass(Login,[{key:\"validateForm\",value:function validateForm(fieldName,value){var errors=this.state.errors;switch(fieldName){case\"username\":if(Validator.isEmpty(value)){errors.username=\"Username field is required\";break;}errors.username=\"\";break;case\"password\":if(Validator.isEmpty(value)){errors.password=\"Password field is required\";break;}errors.password=\"\";break;default:break;}}},{key:\"render\",value:function render(){var _this$state=this.state,errors=_this$state.errors,loading=_this$state.loading;return/*#__PURE__*/React.createElement(React.Fragment,null,loading?showLoading():null,/*#__PURE__*/React.createElement(\"div\",{className:\"container login-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Login Form\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"form\",{className:\"col s12\",noValidate:true,onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(\"input\",{id:\"username\",type:\"text\",onChange:this.handleChange,value:this.state.username,className:classnames(\"\",{invalid:errors.username})}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",htmlFor:\"username\"},\"Username\"),/*#__PURE__*/React.createElement(\"span\",{className:\"red-text\"},errors.username))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(\"input\",{id:\"password\",onChange:this.handleChange,value:this.state.password,type:\"password\",className:classnames(\"\",{invalid:errors.password})}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"span\",{className:\"red-text\"},errors.password))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn waves-effect waves-light \",type:\"submit\"},\"Submit\"),/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"orange btn waves-effect waves-light\"},\"Cancel\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"divider\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s6 \"},/*#__PURE__*/React.createElement(GoogleLogin,{className:\"waves-effect waves-light btn btn-large button-size\",clientId:\"1001864418858-9a5bkmgdeqmee2bk7di7oudhjkq2370s.apps.googleusercontent.com\",buttonText:\"Google Login\",onSuccess:this.responseSuccessGoogle,onFailure:this.responseErrorGoogle,cookiePolicy:\"single_host_origin\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col s6\"},/*#__PURE__*/React.createElement(Link,{to:\"/register\",className:\"waves-effect waves-light btn btn-large blue darken button-size\"},\"Create account\"))))))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/login.jsx"],"names":["React","Component","Link","classnames","setAuthentication","isAuthenticated","showLoading","login","googleLogin","Validator","GoogleLogin","toast","Login","state","username","password","errors","loading","successMessage","componentDidMount","role","props","history","push","location","setState","responseSuccessGoogle","response","tokenId","then","res","data","token","user","console","log","window","reload","JSON","parse","localStorage","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","catch","err","responseErrorGoogle","validate","s","test","replace","trim","handleChange","e","badInput","target","value","id","validateForm","handleSubmit","preventDefault","userData","error","fieldName","isEmpty","invalid"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport { setAuthentication, isAuthenticated } from \"./helper/auth\";\nimport { showLoading } from \"./helper/loading\";\nimport { login, googleLogin } from \"../api/auth\";\nimport Validator from \"validator\";\nimport GoogleLogin from \"react-google-login\";\nimport { toast } from \"react-toastify\";\n\nclass Login extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    errors: {},\n    loading: false,\n    successMessage: \"\",\n  };\n\n  componentDidMount = () => {\n    if (isAuthenticated() && isAuthenticated().role === 1) {\n      this.props.history.push(\"/admin\");\n    } else if (isAuthenticated() && isAuthenticated().role === 0) {\n      this.props.history.push(\"/recipes\");\n    }\n    if (this.props.history.location.state) {\n      const { username, password } = this.props.history.location.state;\n      this.setState({ username, password });\n    }\n  };\n\n  responseSuccessGoogle = (response) => {\n    const tokenId = { tokenId: response.tokenId };\n    this.setState({ loading: true });\n    googleLogin(tokenId)\n      .then((res) => {\n        const { token, user } = res.data;\n        console.log(res.data);\n        setAuthentication(token, user);\n        if (isAuthenticated() && isAuthenticated().role === 1) {\n          this.props.history.push(\"/admin\");\n          window.location.reload(false);\n        } else {\n          this.props.history.push(\"/recipes\");\n          window.location.reload(false);\n        }\n        const { username } = JSON.parse(localStorage.user);\n        toast.success(`Signed in as ${username}`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n        this.setState({\n          loading: false,\n        });\n      })\n      .catch((err) => {\n        this.setState({ loading: false });\n      });\n  };\n\n  responseErrorGoogle = (response) => {\n    console.log(response);\n  };\n\n  validate = (s) => {\n    if (/^(\\w+\\s?)*\\s*$/.test(s)) {\n      return s.replace(/\\s+$/, \"\");\n    }\n    console.log(\"TEST\");\n    let trim = s.trim();\n    return trim;\n  };\n\n  handleChange = (e) => {\n    const badInput = e.target.value;\n    var value = badInput.replace(/  +/g, \" \");\n    this.setState({ [e.target.id]: value });\n    this.validateForm(e.target.id, value);\n  };\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const userData = {\n      username: this.state.username.trim(),\n      password: this.state.password.trim(),\n    };\n    this.setState({ loading: true });\n    login(userData)\n      .then((res) => {\n        // Set User to localStorage and Token to Cookies\n        const { token, user } = res.data;\n        setAuthentication(token, user);\n        if (isAuthenticated() && isAuthenticated().role === 1) {\n          this.props.history.push(\"/admin/recipes\");\n          window.location.reload(false);\n        } else {\n          this.props.history.push(\"/recipes\");\n          window.location.reload(false);\n        }\n        this.setState({\n          loading: false,\n          successMessage: res.data.successMessage,\n        });\n        const { username } = JSON.parse(localStorage.user);\n        toast.success(`Signed in as ${username}`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      })\n      .catch((err) => {\n        this.setState({ errors: err.response.data, loading: false });\n        toast.error(\"Username or Password is invalid\", {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      });\n  };\n\n  validateForm(fieldName, value) {\n    const { errors } = this.state;\n    switch (fieldName) {\n      case \"username\":\n        if (Validator.isEmpty(value)) {\n          errors.username = \"Username field is required\";\n          break;\n        }\n        errors.username = \"\";\n        break;\n      case \"password\":\n        if (Validator.isEmpty(value)) {\n          errors.password = \"Password field is required\";\n          break;\n        }\n        errors.password = \"\";\n        break;\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const { errors, loading } = this.state;\n\n    return (\n      <React.Fragment>\n        {loading ? showLoading() : null}\n        <div className=\"container login-container\">\n          <div className=\"card\">\n            <div className=\"card-content\">\n              <div className=\"section\">\n                <div className=\"row\">\n                  <h3>Login Form</h3>\n                </div>\n\n                <div className=\"row\">\n                  <form\n                    className=\"col s12\"\n                    noValidate\n                    onSubmit={this.handleSubmit}\n                  >\n                    <div className=\"row\">\n                      <div className=\"input-field col s12\">\n                        <input\n                          id=\"username\"\n                          type=\"text\"\n                          onChange={this.handleChange}\n                          value={this.state.username}\n                          className={classnames(\"\", {\n                            invalid: errors.username,\n                          })}\n                        />\n                        <label className=\"active\" htmlFor=\"username\">\n                          Username\n                        </label>\n                        <span className=\"red-text\">{errors.username}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"row\">\n                      <div className=\"input-field col s12\">\n                        <input\n                          id=\"password\"\n                          onChange={this.handleChange}\n                          value={this.state.password}\n                          type=\"password\"\n                          className={classnames(\"\", {\n                            invalid: errors.password,\n                          })}\n                        />\n                        <label className=\"active\" htmlFor=\"password\">\n                          Password\n                        </label>\n                        <span className=\"red-text\">{errors.password}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"row\">\n                      <button\n                        className=\"btn waves-effect waves-light \"\n                        type=\"submit\"\n                      >\n                        Submit\n                      </button>\n\n                      <Link\n                        to=\"/\"\n                        className=\"orange btn waves-effect waves-light\"\n                      >\n                        Cancel\n                      </Link>\n                    </div>\n                  </form>\n                </div>\n                <div className=\"divider\"></div>\n                <div className=\"row\">\n                  <div className=\"col s6 \">\n                    <GoogleLogin\n                      className=\"waves-effect waves-light btn btn-large button-size\"\n                      clientId=\"1001864418858-9a5bkmgdeqmee2bk7di7oudhjkq2370s.apps.googleusercontent.com\"\n                      buttonText=\"Google Login\"\n                      onSuccess={this.responseSuccessGoogle}\n                      onFailure={this.responseErrorGoogle}\n                      cookiePolicy={\"single_host_origin\"}\n                    />\n                  </div>\n                  <div className=\"col s6\">\n                    <Link\n                      to=\"/register\"\n                      className=\"waves-effect waves-light btn btn-large blue darken button-size\"\n                    >\n                      Create account\n                    </Link>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}