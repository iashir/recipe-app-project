{"ast":null,"code":"import _classCallCheck from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import moment from\"moment\";import{Link,withRouter}from\"react-router-dom\";import M from\"materialize-css\";import{showLoading}from\"./helper/loading\";import{toast}from\"react-toastify\";import AOS from\"aos\";import\"aos/dist/aos.css\";var MyRecipes=/*#__PURE__*/function(_Component){_inherits(MyRecipes,_Component);var _super=_createSuper(MyRecipes);function MyRecipes(){var _this;_classCallCheck(this,MyRecipes);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={userRecipes:[],loading:false,user:{}};_this.componentDidMount=function(){AOS.init();var floatButton=document.querySelectorAll(\".fixed-action-btn\");M.FloatingActionButton.init(floatButton);var user=JSON.parse(localStorage.user);_this.setState({loading:true,user:user});axios.get(\"/api/myrecipes/\".concat(user._id)).then(function(_ref){var userRecipes=_ref.data;_this.setState({userRecipes:userRecipes,loading:false});if(_this.state.userRecipes.length===0){var elemsTap=document.querySelector(\".tap-target\");var instancesTap=M.TapTarget.init(elemsTap);instancesTap.open();}}).catch(function(err){return console.log(err);});};_this.deleteRecipe=function(e){var currentRecipe=_this.state.userRecipes.find(function(m){return m._id===e.currentTarget.id;});var userRecipes=_this.state.userRecipes.filter(function(m){return m._id!==e.currentTarget.id;});_this.setState({userRecipes:userRecipes});var id=e.currentTarget.id;var obj={_id:id,user:_this.state.user};axios.delete(\"/api/recipes/\".concat(id),{data:obj}).then(function(){toast.success(\"You successfully deleted \".concat(currentRecipe.title),{position:\"bottom-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}).catch(function(err){_this.setState({errors:err});});};return _this;}_createClass(MyRecipes,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,userRecipes=_this$state.userRecipes,loading=_this$state.loading;if(userRecipes.length===0){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},loading?showLoading():null,/*#__PURE__*/React.createElement(\"p\",null,\"You did't crate recipes yet\"),/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-action-btn \"},/*#__PURE__*/React.createElement(Link,{to:\"/my-recipes/add\",id:\"menu\",className:\"btn-floating btn-large waves-effect waves-light red pulse\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"add\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tap-target teal lighten-4\",\"data-target\":\"menu\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tap-target-content\"},/*#__PURE__*/React.createElement(\"h5\",null,\"You don't have recipes yet\"),/*#__PURE__*/React.createElement(\"p\",null,\"Click me to add your first recipe\"))))));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},loading?showLoading():null,/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-action-btn \"},/*#__PURE__*/React.createElement(Link,{to:\"/my-recipes/add\",id:\"menu\",className:\"btn-floating btn-large waves-effect waves-light red\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"add\"))),/*#__PURE__*/React.createElement(\"table\",{className:\"stipped \"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Title\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Status\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,userRecipes.map(function(recipe){return/*#__PURE__*/React.createElement(\"tr\",{key:recipe._id,\"data-aos\":\"fade-left\",\"data-aos-easing\":\"linear\",\"data-aos-duration\":\"4500\"},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/recipes/\"+recipe._id},recipe.title)),/*#__PURE__*/React.createElement(\"td\",null,moment(recipe.createdAt).startOf(\"hour\").fromNow()),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"dash status\"},recipe.status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/my-recipes/edit/\"+recipe._id,className:\"btn btn-small \"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-edit\"})),/*#__PURE__*/React.createElement(\"button\",{id:recipe._id,style:{marginRight:\"0px\"},className:\"btn red btn-small\",onClick:_this2.deleteRecipe},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash\"}))));})))));}}}]);return MyRecipes;}(Component);export default withRouter(MyRecipes);","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/myRecipes.jsx"],"names":["React","Component","axios","moment","Link","withRouter","M","showLoading","toast","AOS","MyRecipes","state","userRecipes","loading","user","componentDidMount","init","floatButton","document","querySelectorAll","FloatingActionButton","JSON","parse","localStorage","setState","get","_id","then","data","length","elemsTap","querySelector","instancesTap","TapTarget","open","catch","err","console","log","deleteRecipe","e","currentRecipe","find","m","currentTarget","id","filter","obj","delete","success","title","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","errors","map","recipe","createdAt","startOf","fromNow","status","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport M from \"materialize-css\";\nimport { showLoading } from \"./helper/loading\";\nimport { toast } from \"react-toastify\";\nimport AOS from \"aos\";\nimport \"aos/dist/aos.css\";\nclass MyRecipes extends Component {\n  state = { userRecipes: [], loading: false, user: {} };\n  componentDidMount = () => {\n    AOS.init();\n    var floatButton = document.querySelectorAll(\".fixed-action-btn\");\n    M.FloatingActionButton.init(floatButton);\n    const user = JSON.parse(localStorage.user);\n    this.setState({ loading: true, user });\n\n    axios\n      .get(`/api/myrecipes/${user._id}`)\n      .then(({ data: userRecipes }) => {\n        this.setState({ userRecipes, loading: false });\n        if (this.state.userRecipes.length === 0) {\n          var elemsTap = document.querySelector(\".tap-target\");\n          var instancesTap = M.TapTarget.init(elemsTap);\n          instancesTap.open();\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n  deleteRecipe = (e) => {\n    const currentRecipe = this.state.userRecipes.find(\n      (m) => m._id === e.currentTarget.id\n    );\n    const userRecipes = this.state.userRecipes.filter(\n      (m) => m._id !== e.currentTarget.id\n    );\n    this.setState({ userRecipes });\n    const id = e.currentTarget.id;\n    const obj = {\n      _id: id,\n      user: this.state.user,\n    };\n    axios\n      .delete(`/api/recipes/${id}`, { data: obj })\n      .then(() => {\n        toast.success(`You successfully deleted ${currentRecipe.title}`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      })\n      .catch((err) => {\n        this.setState({ errors: err });\n      });\n  };\n\n  render() {\n    const { userRecipes, loading } = this.state;\n\n    if (userRecipes.length === 0) {\n      return (\n        <React.Fragment>\n          <div className=\"container\">\n            {loading ? showLoading() : null}\n            <p>You did't crate recipes yet</p>\n            <div className=\"fixed-action-btn \">\n              <Link\n                to=\"/my-recipes/add\"\n                id=\"menu\"\n                className=\"btn-floating btn-large waves-effect waves-light red pulse\"\n              >\n                <i className=\"material-icons\">add</i>\n              </Link>\n              <div className=\"tap-target teal lighten-4\" data-target=\"menu\">\n                <div className=\"tap-target-content\">\n                  <h5>You don't have recipes yet</h5>\n                  <p>Click me to add your first recipe</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </React.Fragment>\n      );\n    } else {\n      return (\n        <React.Fragment>\n          <main className=\"container\">\n            {loading ? showLoading() : null}\n            <div className=\"fixed-action-btn \">\n              <Link\n                to=\"/my-recipes/add\"\n                id=\"menu\"\n                className=\"btn-floating btn-large waves-effect waves-light red\"\n              >\n                <i className=\"material-icons\">add</i>\n              </Link>\n            </div>\n\n            <table className=\"stipped \">\n              <thead>\n                <tr>\n                  <th>Title</th>\n                  <th>Date</th>\n                  <th>Status</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                {userRecipes.map((recipe) => (\n                  <tr\n                    key={recipe._id}\n                    data-aos=\"fade-left\"\n                    data-aos-easing=\"linear\"\n                    data-aos-duration=\"4500\"\n                  >\n                    <td>\n                      <Link to={\"/recipes/\" + recipe._id}>{recipe.title}</Link>\n                    </td>\n                    <td>\n                      {moment(recipe.createdAt).startOf(\"hour\").fromNow()}\n                    </td>\n                    <td>\n                      <span className=\"dash status\">{recipe.status}</span>\n                    </td>\n                    <td>\n                      <Link\n                        to={\"/my-recipes/edit/\" + recipe._id}\n                        className=\"btn btn-small \"\n                      >\n                        <i className=\"fa fa-edit\"></i>\n                      </Link>\n\n                      <button\n                        id={recipe._id}\n                        style={{ marginRight: \"0px\" }}\n                        className=\"btn red btn-small\"\n                        onClick={this.deleteRecipe}\n                      >\n                        <i className=\"fa fa-trash\"></i>\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </main>\n        </React.Fragment>\n      );\n    }\n  }\n}\n\nexport default withRouter(MyRecipes);\n"]},"metadata":{},"sourceType":"module"}