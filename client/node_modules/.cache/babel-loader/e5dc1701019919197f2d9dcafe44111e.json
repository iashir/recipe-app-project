{"ast":null,"code":"import _classCallCheck from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/iashir/Desktop/WorkProjects/Recipe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import moment from\"moment\";import{showLoading}from\"../helper/loading\";import{toast}from\"react-toastify\";import AOS from\"aos\";import\"aos/dist/aos.css\";var AdminRecipes=/*#__PURE__*/function(_Component){_inherits(AdminRecipes,_Component);var _super=_createSuper(AdminRecipes);function AdminRecipes(){var _this;_classCallCheck(this,AdminRecipes);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={recipes:[],loading:false,user:\"\"};_this.componentDidMount=function(){AOS.init();var _JSON$parse=JSON.parse(localStorage.user),_id=_JSON$parse._id;_this.setState({loading:true,user:_id});axios.get(\"/api/admin/recipes\").then(function(_ref){var recipes=_ref.data;_this.setState({recipes:recipes,loading:false});});};_this.deleteRecipe=function(e){var currentRecipe=_this.state.recipes.find(function(m){return m._id===e.currentTarget.id;});var recipes=_this.state.recipes.filter(function(m){return m._id!==e.currentTarget.id;});_this.setState({recipes:recipes});var id=e.currentTarget.id;var obj={_id:id,user:_this.state.user};console.log(obj);axios.delete(\"/api/recipes/\".concat(id),{data:obj}).then(function(){toast.success(\"You successfully deleted \".concat(currentRecipe.title),{position:\"bottom-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}).catch(function(err){_this.setState({errors:err});});};return _this;}_createClass(AdminRecipes,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,recipes=_this$state.recipes,loading=_this$state.loading;return/*#__PURE__*/React.createElement(\"main\",{className:\"container\"},loading?showLoading():null,/*#__PURE__*/React.createElement(\"table\",{className:\"stipped\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Title\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Status\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,recipes.map(function(recipe){return/*#__PURE__*/React.createElement(\"tr\",{key:recipe._id,\"data-aos\":\"fade-left\",\"data-aos-easing\":\"linear\",\"data-aos-duration\":\"4500\"},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/recipes/\"+recipe._id},recipe.title)),/*#__PURE__*/React.createElement(\"td\",null,moment(recipe.createdAt).format(\"LLLL\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"dash status\"},recipe.status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/admin/edit/\"+recipe._id,className:\"btn btn-float \"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-edit\"})),/*#__PURE__*/React.createElement(\"button\",{id:recipe._id,className:\"btn red\",onClick:_this2.deleteRecipe},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash\"}))));}))));}}]);return AdminRecipes;}(Component);export default AdminRecipes;","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Recipe/client/src/components/admin/recipes.jsx"],"names":["React","Component","axios","Link","moment","showLoading","toast","AOS","AdminRecipes","state","recipes","loading","user","componentDidMount","init","JSON","parse","localStorage","_id","setState","get","then","data","deleteRecipe","e","currentRecipe","find","m","currentTarget","id","filter","obj","console","log","delete","success","title","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","catch","err","errors","map","recipe","createdAt","format","status"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { showLoading } from \"../helper/loading\";\nimport { toast } from \"react-toastify\";\nimport AOS from \"aos\";\nimport \"aos/dist/aos.css\";\nclass AdminRecipes extends Component {\n  state = { recipes: [], loading: false, user: \"\" };\n  componentDidMount = () => {\n    AOS.init();\n    const { _id } = JSON.parse(localStorage.user);\n    this.setState({ loading: true, user: _id });\n    axios.get(\"/api/admin/recipes\").then(({ data: recipes }) => {\n      this.setState({ recipes, loading: false });\n    });\n  };\n\n  deleteRecipe = (e) => {\n    const currentRecipe = this.state.recipes.find(\n      (m) => m._id === e.currentTarget.id\n    );\n    const recipes = this.state.recipes.filter(\n      (m) => m._id !== e.currentTarget.id\n    );\n    this.setState({ recipes });\n    const id = e.currentTarget.id;\n    const obj = {\n      _id: id,\n      user: this.state.user,\n    };\n    console.log(obj);\n    axios\n      .delete(`/api/recipes/${id}`, { data: obj })\n      .then(() => {\n        toast.success(`You successfully deleted ${currentRecipe.title}`, {\n          position: \"bottom-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      })\n      .catch((err) => {\n        this.setState({ errors: err });\n      });\n  };\n  render() {\n    const { recipes, loading } = this.state;\n    return (\n      <main className=\"container\">\n        {loading ? showLoading() : null}\n        <table className=\"stipped\">\n          <thead>\n            <tr>\n              <th>Title</th>\n              <th>Date</th>\n              <th>Status</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {recipes.map((recipe) => (\n              <tr\n                key={recipe._id}\n                data-aos=\"fade-left\"\n                data-aos-easing=\"linear\"\n                data-aos-duration=\"4500\"\n              >\n                <td>\n                  <Link to={\"/recipes/\" + recipe._id}>{recipe.title}</Link>\n                </td>\n                <td>{moment(recipe.createdAt).format(\"LLLL\")}</td>\n                <td>\n                  <span className=\"dash status\">{recipe.status}</span>\n                </td>\n                <td>\n                  <Link\n                    to={\"/admin/edit/\" + recipe._id}\n                    className=\"btn btn-float \"\n                  >\n                    <i className=\"fa fa-edit\"></i>\n                  </Link>\n\n                  <button\n                    id={recipe._id}\n                    className=\"btn red\"\n                    onClick={this.deleteRecipe}\n                  >\n                    <i className=\"fa fa-trash\"></i>\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </main>\n    );\n  }\n}\n\nexport default AdminRecipes;\n"]},"metadata":{},"sourceType":"module"}